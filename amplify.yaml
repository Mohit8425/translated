version: 2
appConfig:
  frontend:
    phases:
      preBuild:
        commands:
          - npm ci
      build:
        commands:
          - npm run build
    artifacts:
      baseDirectory: dist
      files:
        - '**/*'
  backend:
    phases:
      preBuild:
        commands:
          - npm ci
      build:
        commands:
          - npm run amplify push
    artifacts:
      baseDirectory: amplify/backend
      files:
        - '**/*'